import numpy as np
import pyqtgraph as pq

display_backends = {}


def get_app():
    return pq.mkQApp()


def run_app(app):
    app.exec_()


def display(arg, *items):
    for type_key, f in display_backends.items():
        if isinstance(arg, type_key):
            f(arg, *items)
            return
    else:
        raise ValueError(f"Display not implemented for type {type(arg)}")


rainbow_colormap = np.array(
    [
        [0.5, 0.0, 1.0, 1.0],
        [0.49215686, 0.01231966, 0.99998103, 1.0],
        [0.48431373, 0.02463745, 0.99992411, 1.0],
        [0.47647059, 0.0369515, 0.99982925, 1.0],
        [0.46862745, 0.04925994, 0.99969645, 1.0],
        [0.46078431, 0.06156091, 0.99952572, 1.0],
        [0.45294118, 0.07385253, 0.99931706, 1.0],
        [0.44509804, 0.08613294, 0.99907048, 1.0],
        [0.4372549, 0.09840028, 0.99878599, 1.0],
        [0.42941176, 0.11065268, 0.9984636, 1.0],
        [0.42156863, 0.12288829, 0.99810333, 1.0],
        [0.41372549, 0.13510525, 0.99770518, 1.0],
        [0.40588235, 0.1473017, 0.99726917, 1.0],
        [0.39803922, 0.15947579, 0.99679532, 1.0],
        [0.39019608, 0.17162568, 0.99628365, 1.0],
        [0.38235294, 0.18374952, 0.99573418, 1.0],
        [0.3745098, 0.19584547, 0.99514692, 1.0],
        [0.36666667, 0.20791169, 0.9945219, 1.0],
        [0.35882353, 0.21994636, 0.99385914, 1.0],
        [0.35098039, 0.23194764, 0.99315867, 1.0],
        [0.34313725, 0.24391372, 0.99242051, 1.0],
        [0.33529412, 0.25584278, 0.9916447, 1.0],
        [0.32745098, 0.267733, 0.99083125, 1.0],
        [0.31960784, 0.27958259, 0.98998021, 1.0],
        [0.31176471, 0.29138975, 0.98909161, 1.0],
        [0.30392157, 0.30315267, 0.98816547, 1.0],
        [0.29607843, 0.31486959, 0.98720184, 1.0],
        [0.28823529, 0.32653871, 0.98620075, 1.0],
        [0.28039216, 0.33815827, 0.98516223, 1.0],
        [0.27254902, 0.34972651, 0.98408634, 1.0],
        [0.26470588, 0.36124167, 0.9829731, 1.0],
        [0.25686275, 0.37270199, 0.98182256, 1.0],
        [0.24901961, 0.38410575, 0.98063477, 1.0],
        [0.24117647, 0.39545121, 0.97940977, 1.0],
        [0.23333333, 0.40673664, 0.9781476, 1.0],
        [0.2254902, 0.41796034, 0.97684832, 1.0],
        [0.21764706, 0.42912061, 0.97551197, 1.0],
        [0.20980392, 0.44021574, 0.9741386, 1.0],
        [0.20196078, 0.45124406, 0.97272827, 1.0],
        [0.19411765, 0.46220388, 0.97128103, 1.0],
        [0.18627451, 0.47309356, 0.96979694, 1.0],
        [0.17843137, 0.48391142, 0.96827604, 1.0],
        [0.17058824, 0.49465584, 0.9667184, 1.0],
        [0.1627451, 0.50532518, 0.96512409, 1.0],
        [0.15490196, 0.51591783, 0.96349314, 1.0],
        [0.14705882, 0.52643216, 0.96182564, 1.0],
        [0.13921569, 0.5368666, 0.96012165, 1.0],
        [0.13137255, 0.54721955, 0.95838122, 1.0],
        [0.12352941, 0.55748944, 0.95660442, 1.0],
        [0.11568627, 0.56767472, 0.95479132, 1.0],
        [0.10784314, 0.57777383, 0.952942, 1.0],
        [0.1, 0.58778525, 0.95105652, 1.0],
        [0.09215686, 0.59770746, 0.94913494, 1.0],
        [0.08431373, 0.60753895, 0.94717736, 1.0],
        [0.07647059, 0.61727822, 0.94518383, 1.0],
        [0.06862745, 0.62692381, 0.94315443, 1.0],
        [0.06078431, 0.63647424, 0.94108925, 1.0],
        [0.05294118, 0.64592806, 0.93898836, 1.0],
        [0.04509804, 0.65528385, 0.93685184, 1.0],
        [0.0372549, 0.66454018, 0.93467977, 1.0],
        [0.02941176, 0.67369564, 0.93247223, 1.0],
        [0.02156863, 0.68274886, 0.93022931, 1.0],
        [0.01372549, 0.69169844, 0.92795109, 1.0],
        [0.00588235, 0.70054304, 0.92563766, 1.0],
        [0.00196078, 0.70928131, 0.92328911, 1.0],
        [0.00980392, 0.71791192, 0.92090552, 1.0],
        [0.01764706, 0.72643357, 0.91848699, 1.0],
        [0.0254902, 0.73484497, 0.9160336, 1.0],
        [0.03333333, 0.74314483, 0.91354546, 1.0],
        [0.04117647, 0.75133189, 0.91102265, 1.0],
        [0.04901961, 0.75940492, 0.90846527, 1.0],
        [0.05686275, 0.76736268, 0.90587342, 1.0],
        [0.06470588, 0.77520398, 0.9032472, 1.0],
        [0.07254902, 0.78292761, 0.9005867, 1.0],
        [0.08039216, 0.79053241, 0.89789203, 1.0],
        [0.08823529, 0.79801723, 0.89516329, 1.0],
        [0.09607843, 0.80538092, 0.89240058, 1.0],
        [0.10392157, 0.81262237, 0.88960401, 1.0],
        [0.11176471, 0.81974048, 0.88677369, 1.0],
        [0.11960784, 0.82673417, 0.88390971, 1.0],
        [0.12745098, 0.83360239, 0.88101219, 1.0],
        [0.13529412, 0.84034407, 0.87808125, 1.0],
        [0.14313725, 0.84695821, 0.87511698, 1.0],
        [0.15098039, 0.8534438, 0.87211951, 1.0],
        [0.15882353, 0.85979985, 0.86908895, 1.0],
        [0.16666667, 0.8660254, 0.8660254, 1.0],
        [0.1745098, 0.87211951, 0.862929, 1.0],
        [0.18235294, 0.87808125, 0.85979985, 1.0],
        [0.19019608, 0.88390971, 0.85663808, 1.0],
        [0.19803922, 0.88960401, 0.8534438, 1.0],
        [0.20588235, 0.89516329, 0.85021714, 1.0],
        [0.21372549, 0.9005867, 0.84695821, 1.0],
        [0.22156863, 0.90587342, 0.84366715, 1.0],
        [0.22941176, 0.91102265, 0.84034407, 1.0],
        [0.2372549, 0.9160336, 0.83698911, 1.0],
        [0.24509804, 0.92090552, 0.83360239, 1.0],
        [0.25294118, 0.92563766, 0.83018403, 1.0],
        [0.26078431, 0.93022931, 0.82673417, 1.0],
        [0.26862745, 0.93467977, 0.82325295, 1.0],
        [0.27647059, 0.93898836, 0.81974048, 1.0],
        [0.28431373, 0.94315443, 0.81619691, 1.0],
        [0.29215686, 0.94717736, 0.81262237, 1.0],
        [0.3, 0.95105652, 0.80901699, 1.0],
        [0.30784314, 0.95479132, 0.80538092, 1.0],
        [0.31568627, 0.95838122, 0.80171428, 1.0],
        [0.32352941, 0.96182564, 0.79801723, 1.0],
        [0.33137255, 0.96512409, 0.79428989, 1.0],
        [0.33921569, 0.96827604, 0.79053241, 1.0],
        [0.34705882, 0.97128103, 0.78674494, 1.0],
        [0.35490196, 0.9741386, 0.78292761, 1.0],
        [0.3627451, 0.97684832, 0.77908057, 1.0],
        [0.37058824, 0.97940977, 0.77520398, 1.0],
        [0.37843137, 0.98182256, 0.77129796, 1.0],
        [0.38627451, 0.98408634, 0.76736268, 1.0],
        [0.39411765, 0.98620075, 0.76339828, 1.0],
        [0.40196078, 0.98816547, 0.75940492, 1.0],
        [0.40980392, 0.98998021, 0.75538273, 1.0],
        [0.41764706, 0.9916447, 0.75133189, 1.0],
        [0.4254902, 0.99315867, 0.74725253, 1.0],
        [0.43333333, 0.9945219, 0.74314483, 1.0],
        [0.44117647, 0.99573418, 0.73900892, 1.0],
        [0.44901961, 0.99679532, 0.73484497, 1.0],
        [0.45686275, 0.99770518, 0.73065313, 1.0],
        [0.46470588, 0.9984636, 0.72643357, 1.0],
        [0.47254902, 0.99907048, 0.72218645, 1.0],
        [0.48039216, 0.99952572, 0.71791192, 1.0],
        [0.48823529, 0.99982925, 0.71361015, 1.0],
        [0.49607843, 0.99998103, 0.70928131, 1.0],
        [0.50392157, 0.99998103, 0.70492555, 1.0],
        [0.51176471, 0.99982925, 0.70054304, 1.0],
        [0.51960784, 0.99952572, 0.69613395, 1.0],
        [0.52745098, 0.99907048, 0.69169844, 1.0],
        [0.53529412, 0.9984636, 0.68723669, 1.0],
        [0.54313725, 0.99770518, 0.68274886, 1.0],
        [0.55098039, 0.99679532, 0.67823512, 1.0],
        [0.55882353, 0.99573418, 0.67369564, 1.0],
        [0.56666667, 0.9945219, 0.66913061, 1.0],
        [0.5745098, 0.99315867, 0.66454018, 1.0],
        [0.58235294, 0.9916447, 0.65992453, 1.0],
        [0.59019608, 0.98998021, 0.65528385, 1.0],
        [0.59803922, 0.98816547, 0.6506183, 1.0],
        [0.60588235, 0.98620075, 0.64592806, 1.0],
        [0.61372549, 0.98408634, 0.64121331, 1.0],
        [0.62156863, 0.98182256, 0.63647424, 1.0],
        [0.62941176, 0.97940977, 0.63171101, 1.0],
        [0.6372549, 0.97684832, 0.62692381, 1.0],
        [0.64509804, 0.9741386, 0.62211282, 1.0],
        [0.65294118, 0.97128103, 0.61727822, 1.0],
        [0.66078431, 0.96827604, 0.6124202, 1.0],
        [0.66862745, 0.96512409, 0.60753895, 1.0],
        [0.67647059, 0.96182564, 0.60263464, 1.0],
        [0.68431373, 0.95838122, 0.59770746, 1.0],
        [0.69215686, 0.95479132, 0.5927576, 1.0],
        [0.7, 0.95105652, 0.58778525, 1.0],
        [0.70784314, 0.94717736, 0.5827906, 1.0],
        [0.71568627, 0.94315443, 0.57777383, 1.0],
        [0.72352941, 0.93898836, 0.57273514, 1.0],
        [0.73137255, 0.93467977, 0.56767472, 1.0],
        [0.73921569, 0.93022931, 0.56259275, 1.0],
        [0.74705882, 0.92563766, 0.55748944, 1.0],
        [0.75490196, 0.92090552, 0.55236497, 1.0],
        [0.7627451, 0.9160336, 0.54721955, 1.0],
        [0.77058824, 0.91102265, 0.54205336, 1.0],
        [0.77843137, 0.90587342, 0.5368666, 1.0],
        [0.78627451, 0.9005867, 0.53165947, 1.0],
        [0.79411765, 0.89516329, 0.52643216, 1.0],
        [0.80196078, 0.88960401, 0.52118488, 1.0],
        [0.80980392, 0.88390971, 0.51591783, 1.0],
        [0.81764706, 0.87808125, 0.51063119, 1.0],
        [0.8254902, 0.87211951, 0.50532518, 1.0],
        [0.83333333, 0.8660254, 0.5, 1.0],
        [0.84117647, 0.85979985, 0.49465584, 1.0],
        [0.84901961, 0.8534438, 0.48929292, 1.0],
        [0.85686275, 0.84695821, 0.48391142, 1.0],
        [0.86470588, 0.84034407, 0.47851157, 1.0],
        [0.87254902, 0.83360239, 0.47309356, 1.0],
        [0.88039216, 0.82673417, 0.46765759, 1.0],
        [0.88823529, 0.81974048, 0.46220388, 1.0],
        [0.89607843, 0.81262237, 0.45673264, 1.0],
        [0.90392157, 0.80538092, 0.45124406, 1.0],
        [0.91176471, 0.79801723, 0.44573836, 1.0],
        [0.91960784, 0.79053241, 0.44021574, 1.0],
        [0.92745098, 0.78292761, 0.43467642, 1.0],
        [0.93529412, 0.77520398, 0.42912061, 1.0],
        [0.94313725, 0.76736268, 0.42354851, 1.0],
        [0.95098039, 0.75940492, 0.41796034, 1.0],
        [0.95882353, 0.75133189, 0.41235632, 1.0],
        [0.96666667, 0.74314483, 0.40673664, 1.0],
        [0.9745098, 0.73484497, 0.40110153, 1.0],
        [0.98235294, 0.72643357, 0.39545121, 1.0],
        [0.99019608, 0.71791192, 0.38978587, 1.0],
        [0.99803922, 0.70928131, 0.38410575, 1.0],
        [1.0, 0.70054304, 0.37841105, 1.0],
        [1.0, 0.69169844, 0.37270199, 1.0],
        [1.0, 0.68274886, 0.36697879, 1.0],
        [1.0, 0.67369564, 0.36124167, 1.0],
        [1.0, 0.66454018, 0.35549083, 1.0],
        [1.0, 0.65528385, 0.34972651, 1.0],
        [1.0, 0.64592806, 0.34394892, 1.0],
        [1.0, 0.63647424, 0.33815827, 1.0],
        [1.0, 0.62692381, 0.3323548, 1.0],
        [1.0, 0.61727822, 0.32653871, 1.0],
        [1.0, 0.60753895, 0.32071024, 1.0],
        [1.0, 0.59770746, 0.31486959, 1.0],
        [1.0, 0.58778525, 0.30901699, 1.0],
        [1.0, 0.57777383, 0.30315267, 1.0],
        [1.0, 0.56767472, 0.29727685, 1.0],
        [1.0, 0.55748944, 0.29138975, 1.0],
        [1.0, 0.54721955, 0.28549159, 1.0],
        [1.0, 0.5368666, 0.27958259, 1.0],
        [1.0, 0.52643216, 0.27366299, 1.0],
        [1.0, 0.51591783, 0.267733, 1.0],
        [1.0, 0.50532518, 0.26179286, 1.0],
        [1.0, 0.49465584, 0.25584278, 1.0],
        [1.0, 0.48391142, 0.24988299, 1.0],
        [1.0, 0.47309356, 0.24391372, 1.0],
        [1.0, 0.46220388, 0.2379352, 1.0],
        [1.0, 0.45124406, 0.23194764, 1.0],
        [1.0, 0.44021574, 0.22595129, 1.0],
        [1.0, 0.42912061, 0.21994636, 1.0],
        [1.0, 0.41796034, 0.21393308, 1.0],
        [1.0, 0.40673664, 0.20791169, 1.0],
        [1.0, 0.39545121, 0.20188241, 1.0],
        [1.0, 0.38410575, 0.19584547, 1.0],
        [1.0, 0.37270199, 0.18980109, 1.0],
        [1.0, 0.36124167, 0.18374952, 1.0],
        [1.0, 0.34972651, 0.17769097, 1.0],
        [1.0, 0.33815827, 0.17162568, 1.0],
        [1.0, 0.32653871, 0.16555388, 1.0],
        [1.0, 0.31486959, 0.15947579, 1.0],
        [1.0, 0.30315267, 0.15339165, 1.0],
        [1.0, 0.29138975, 0.1473017, 1.0],
        [1.0, 0.27958259, 0.14120615, 1.0],
        [1.0, 0.267733, 0.13510525, 1.0],
        [1.0, 0.25584278, 0.12899922, 1.0],
        [1.0, 0.24391372, 0.12288829, 1.0],
        [1.0, 0.23194764, 0.1167727, 1.0],
        [1.0, 0.21994636, 0.11065268, 1.0],
        [1.0, 0.20791169, 0.10452846, 1.0],
        [1.0, 0.19584547, 0.09840028, 1.0],
        [1.0, 0.18374952, 0.09226836, 1.0],
        [1.0, 0.17162568, 0.08613294, 1.0],
        [1.0, 0.15947579, 0.07999425, 1.0],
        [1.0, 0.1473017, 0.07385253, 1.0],
        [1.0, 0.13510525, 0.067708, 1.0],
        [1.0, 0.12288829, 0.06156091, 1.0],
        [1.0, 0.11065268, 0.05541147, 1.0],
        [1.0, 0.09840028, 0.04925994, 1.0],
        [1.0, 0.08613294, 0.04310654, 1.0],
        [1.0, 0.07385253, 0.0369515, 1.0],
        [1.0, 0.06156091, 0.03079506, 1.0],
        [1.0, 0.04925994, 0.02463745, 1.0],
        [1.0, 0.0369515, 0.0184789, 1.0],
        [1.0, 0.02463745, 0.01231966, 1.0],
        [1.0, 0.01231966, 0.00615995, 1.0],
        [1.0000000e00, 1.2246468e-16, 6.1232340e-17, 1.0000000e00],
    ]
)
